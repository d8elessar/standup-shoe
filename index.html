<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link rel="stylesheet" href="css/style.css">
  <meta name="description" content="">

  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">
  <meta property="og:image:alt" content="">

  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icon.png">

  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#fafafa">


  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
</head>

<body>

  <!-- Add your site or application content here -->
  <p>Hello world! This is HTML5 Boilerplate.</p>
  <script src="js/app.js"></script>

  <!--img src="https://driftinginandoutofsteel.wordpress.com/wp-content/uploads/2017/02/solong.jpg" -->
  <script type='text/javascript'>
    function initEmbeddedMessaging() {
      try {
        embeddedservice_bootstrap.settings.language = 'de'; // For example, enter 'en' or 'en-US'
        embeddedservice_bootstrap.settings.hideChatButtonOnLoad = true;

        embeddedservice_bootstrap.init(
          '00D9O00000HhV0L',
          'OXG_Web_Deployment',
          'https://oxg--uat.sandbox.my.site.com/ESWOXGChannel1753267383010',
          {
            scrt2URL: 'https://oxg--uat.sandbox.my.salesforce-scrt.com'
          }
        );
      } catch (err) {
        console.error('Error loading Embedded Messaging: ', err);
      }
    };
  </script>
  <script type='text/javascript'
    src='https://oxg--uat.sandbox.my.site.com/ESWOXGChannel1753267383010/assets/js/bootstrap.min.js'
    onload='initEmbeddedMessaging()'></script>




  <script>
    window.addEventListener(
      "onEmbeddedMessagingButtonCreated", () => {
        console.log('Button Created. Waiting for user to scroll.');

        let scrollCount = 0;
        let isChatButtonShown = false;
        const scrollThreshold = 50; // This is not 50 scrolls, but 50 events.

        // Define the function that will handle the scroll event
        const handleScroll = () => {
          scrollCount++;

          // Check if the scroll count has been met AND if the button isn't already visible
          if (scrollCount >= scrollThreshold && !isChatButtonShown) {

            // Set the flag to true to prevent this from running again
            isChatButtonShown = true;

            console.log('Scroll threshold reached. Showing chat button.');
            embeddedservice_bootstrap.utilAPI.showChatButton();

            // For efficiency, remove the scroll listener now that its job is done
            window.removeEventListener('scroll', handleScroll);

            // --- Start a 5-second timer to launch the chat ---
            console.log('Starting 5-second timer to launch chat...');
            setTimeout(() => {
              console.log('Timer finished. Launching chat.');
              embeddedservice_bootstrap.utilAPI.launchChat()
                .then(() => {
                  console.log('Chat launched successfully.');
                })
                .catch((err) => {
                  console.error('Chat launch failed.', err);
                });
            }, 5000); // 5000 milliseconds = 5 seconds
          }
        };

        // Add the scroll event listener to the window
        window.addEventListener('scroll', handleScroll);
      }
    );
  </script>


</body>

</html>